<!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
       
        <link rel="stylesheet" type="text/css" href="../../../resources/style.css" />
        <script src="https://unpkg.com/canvas-sketch@latest/dist/canvas-sketch.umd.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/canvas-sketch-util-umd@1.10.6/lib/index.umd.min.js"></script>
    </head>
    <body>
        <header>
            <nav>
                <div class="row">
                    <div class="lucy">
                        <p><a href="../../../index.html" class="left_elem">Lucy Stickney</a></p>
                        <p><a href="../../../index.html" class="left_elem_small">LS</a></p>
                    </div>
                    <div class="links">
                        <p><a href="../cv/index.html" class="right_elem">CV</a></p>
                        <p><a href="../../index.html" class="right_elem">See Works</a></p>
                        <p><a href="../index.html" class="right_elem"><strong>Experiments</strong></a></p>
                    </div>
                </div>
            </nav>
        </header>
        <script>
            
            const canvasSketch = window.canvasSketch;
            const random = window.canvasSketchUtil.random;


            const settings = {
            dimensions: [window.innerWidth * 0.8, window.innerHeight * 0.8],
            animate: true
        };

        const sketch = ({ context, width, height }) => {
            const speed = 1000;
            const angle = random.range(0, Math.PI * 2);
            let ball = {
                pos: new Vector(width/2, height * random.range(0, 1)),
                vel: new Vector(Math.cos(angle) * speed, random.range(0, 1) * speed),
                radius: 50
            }
            let strokestyle = "red";
            
            let linewidth = 3;
            const move = (startPos, newPosX, newPosY) => {
                context.globalAlpha = 0.2;
                context.beginPath();
                context.moveTo(startPos.x, startPos.y);
                context.lineTo(newPosX, newPosY);
                context.lineWidth = linewidth;
                context.strokeStyle = strokestyle;
                context.stroke();
                
            }

            return ({ context, width, height }) => {
                //context.fillStyle = 'white';
                //context.fillRect(0, 0, width, height);

                let increasevalx = Math.sign(ball.vel.x) * random.range(0, 20);
                let increasevaly = Math.sign(ball.vel.y) * random.range(0, 20);
                // hitting the sides
                if (ball.pos.x < 0 || ball.pos.x > width) {
                    if (ball.pos.x > width) {
                        strokestyle = "green";
                        ball.pos.x -= 40;
                    } else {
                        strokestyle = "orange";
                        ball.pos.x += 40;
                        //linewidth = 10;
                    }
                    
                    ball.vel.x *= -1;

                }
            

                // hitting top and bottom
                if (ball.pos.y < 0 || ball.pos.y > height) {
                    if (ball.pos.y > height) {
                        strokestyle = "red";
                        ball.pos.y -=40;
                    } else {
                        strokestyle = "blue";
                        //linewidth = 10;
                        ball.pos.y +=40;
                    }
                    ball.vel.y *= -1;
                }


               

                newPosX = ball.pos.x + ball.vel.x + increasevalx;
                newPosY = ball.pos.y + ball.vel.y + increasevaly;

                move(ball.pos, newPosX, newPosY);
                ball.pos.x += ball.vel.x +  increasevalx;
                ball.pos.y += ball.vel.y +  increasevaly;
                    
                // draw the ball
                // context.fillStyle = 'black';
                // context.beginPath();
                // context.arc(ball.pos.x, ball.pos.y, ball.radius, 0, Math.PI * 2);
                // context.fill();
            }

        }

        canvasSketch(sketch, settings);


        class Vector {
            constructor(x, y) {
            this.x = x;
            this.y = y;
            }
            getDistance(x, y) {
            const dx = this.x - x;
            const dy = this.y - y;
            
            return Math.sqrt(dx * dx + dy * dy);
            }
            
        }
        </script>
    </body>
</html>